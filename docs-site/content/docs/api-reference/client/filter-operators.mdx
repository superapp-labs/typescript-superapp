---
title: Filter Operators
description: "Complete filter operator reference."
---

Filter operators are used in `where` clauses to build query conditions. They work in both client queries and server-side permission definitions.

```typescript
db.main.orders.findMany({
  where: {
    status: { $eq: 'active' },
    amount: { $gte: 100 },
  },
})
```

## Comparison Operators

| Operator | Description | Value Type | SQL Equivalent | Example |
|---|---|---|---|---|
| `$eq` | Equal to | `string \| number \| boolean` | `= value` | `{ status: { $eq: 'active' } }` |
| `$ne` | Not equal to | `string \| number \| boolean` | `!= value` | `{ status: { $ne: 'cancelled' } }` |
| `$gt` | Greater than | `number \| string` | `> value` | `{ amount: { $gt: 100 } }` |
| `$gte` | Greater than or equal to | `number \| string` | `>= value` | `{ amount: { $gte: 100 } }` |
| `$lt` | Less than | `number \| string` | `< value` | `{ amount: { $lt: 1000 } }` |
| `$lte` | Less than or equal to | `number \| string` | `<= value` | `{ amount: { $lte: 1000 } }` |

```typescript
// Price between 10 and 100 (inclusive)
where: {
  price: { $gte: 10, $lte: 100 },
}

// Date comparison (ISO strings)
where: {
  created_at: { $gte: '2025-01-01T00:00:00Z' },
}
```

## Set Operators

| Operator | Description | Value Type | SQL Equivalent | Example |
|---|---|---|---|---|
| `$in` | Value is in array | `Array<string \| number>` | `IN (values)` | `{ status: { $in: ['active', 'pending'] } }` |
| `$nin` | Value is not in array | `Array<string \| number>` | `NOT IN (values)` | `{ status: { $nin: ['cancelled', 'archived'] } }` |

```typescript
// Orders with specific statuses
where: {
  status: { $in: ['active', 'pending', 'processing'] },
}

// Exclude certain categories
where: {
  category_id: { $nin: ['cat_internal', 'cat_test'] },
}
```

## Pattern Matching Operators

| Operator | Description | Value Type | SQL Equivalent | Example |
|---|---|---|---|---|
| `$like` | Case-sensitive pattern match | `string` | `LIKE pattern` | `{ name: { $like: '%widget%' } }` |
| `$ilike` | Case-insensitive pattern match | `string` | `ILIKE pattern` | `{ email: { $ilike: '%@example.com' } }` |

Pattern characters:
- `%` matches any sequence of characters (including empty)
- `_` matches exactly one character

```typescript
// Names starting with "Order"
where: {
  name: { $like: 'Order%' },
}

// Case-insensitive email domain search
where: {
  email: { $ilike: '%@example.com' },
}

// Single character wildcard
where: {
  code: { $like: 'A_B' },  // matches 'A1B', 'AXB', etc.
}
```

## Null Check Operator

| Operator | Description | Value Type | SQL Equivalent | Example |
|---|---|---|---|---|
| `$is_null` | Check if value is null or not null | `boolean` | `IS NULL` / `IS NOT NULL` | `{ deleted_at: { $is_null: true } }` |

```typescript
// Rows where deleted_at is NULL (not deleted)
where: {
  deleted_at: { $is_null: true },
}

// Rows where assigned_to is NOT NULL (assigned)
where: {
  assigned_to: { $is_null: false },
}
```

## Logical Operators

| Operator | Description | Value Type | SQL Equivalent | Example |
|---|---|---|---|---|
| `$and` | All conditions must match | `FilterObject[]` | `cond1 AND cond2` | `{ $and: [{ ... }, { ... }] }` |
| `$or` | At least one condition must match | `FilterObject[]` | `cond1 OR cond2` | `{ $or: [{ ... }, { ... }] }` |
| `$not` | Negate a condition | `FilterObject` | `NOT (condition)` | `{ $not: { status: { $eq: 'cancelled' } } }` |

### `$and`

All conditions in the array must be true. Note that multiple keys at the same level are implicitly AND-ed, so `$and` is only needed when you have multiple conditions on the same column.

```typescript
// Implicit AND (multiple keys)
where: {
  status: { $eq: 'active' },
  amount: { $gte: 100 },
}
// SQL: WHERE status = 'active' AND amount >= 100

// Explicit $and (multiple conditions on same column or complex logic)
where: {
  $and: [
    { amount: { $gte: 100 } },
    { amount: { $lte: 1000 } },
  ],
}
// SQL: WHERE amount >= 100 AND amount <= 1000
```

### `$or`

At least one condition in the array must be true.

```typescript
where: {
  $or: [
    { status: { $eq: 'active' } },
    { status: { $eq: 'pending' } },
    { priority: { $eq: 'critical' } },
  ],
}
// SQL: WHERE status = 'active' OR status = 'pending' OR priority = 'critical'
```

### `$not`

Negates the enclosed condition.

```typescript
where: {
  $not: {
    status: { $in: ['cancelled', 'archived'] },
  },
}
// SQL: WHERE NOT (status IN ('cancelled', 'archived'))
```

## Combining Operators

Operators can be nested and combined for complex queries.

```typescript
// Active high-value orders OR critical priority orders that are not cancelled
where: {
  $or: [
    {
      status: { $eq: 'active' },
      amount: { $gte: 1000 },
    },
    {
      priority: { $eq: 'critical' },
      $not: { status: { $eq: 'cancelled' } },
    },
  ],
}
// SQL: WHERE (status = 'active' AND amount >= 1000)
//         OR (priority = 'critical' AND NOT (status = 'cancelled'))
```

```typescript
// Orders from last 30 days, either high value or flagged
where: {
  created_at: { $gte: '2025-01-01T00:00:00Z' },
  $or: [
    { amount: { $gte: 5000 } },
    { flagged: { $eq: true } },
  ],
}
// SQL: WHERE created_at >= '2025-01-01T00:00:00Z'
//        AND (amount >= 5000 OR flagged = true)
```

## Using Operators in Permissions

The same operators work in permission `filter` and `check` definitions. In permissions, you can also use `$user.*` substitution.

```typescript
// Permission filter — same syntax
permissions: {
  view_own_orders: {
    table: 'main.orders',
    operations: { select: true },
    filter: {
      organization_id: { $in: '$user.org_ids' },
      status: { $ne: 'archived' },
    },
  },
}

// Permission check — validates incoming data
permissions: {
  create_order: {
    table: 'main.orders',
    operations: { insert: true },
    check: {
      amount: { $gte: 0, $lte: 1_000_000 },
      status: { $in: ['draft', 'pending'] },
    },
  },
}
```

## Operator Quick Reference

| Operator | Usage | Accepts `$user.*` |
|---|---|---|
| `$eq` | `{ column: { $eq: value } }` | Yes (in permissions) |
| `$ne` | `{ column: { $ne: value } }` | Yes (in permissions) |
| `$gt` | `{ column: { $gt: value } }` | Yes (in permissions) |
| `$gte` | `{ column: { $gte: value } }` | Yes (in permissions) |
| `$lt` | `{ column: { $lt: value } }` | Yes (in permissions) |
| `$lte` | `{ column: { $lte: value } }` | Yes (in permissions) |
| `$in` | `{ column: { $in: [values] } }` | Yes (in permissions) |
| `$nin` | `{ column: { $nin: [values] } }` | Yes (in permissions) |
| `$like` | `{ column: { $like: 'pattern' } }` | No |
| `$ilike` | `{ column: { $ilike: 'pattern' } }` | No |
| `$is_null` | `{ column: { $is_null: boolean } }` | No |
| `$and` | `{ $and: [conditions] }` | N/A (structural) |
| `$or` | `{ $or: [conditions] }` | N/A (structural) |
| `$not` | `{ $not: condition }` | N/A (structural) |
